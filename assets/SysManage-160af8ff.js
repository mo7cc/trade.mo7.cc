import{bb as v,ba as C,a as M,y as N,v as D,o as r,b as c,e as a,f as y,u as f,l as e,k as _,w as p,g as m,b4 as V,r as x,p as P,h as R}from"./index-e1b4e266.js";import{A as B}from"./index-443e836d.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";import"./Input-90f12dff.js";import"./use-merged-state-0e90f292.js";const W=t=>{const s={...t,Password:v(t.Password),Code:v(t.Code)};return C({url:"/CoinAI/sys/restart",data:s,method:"post",SatelliteServe:s.SatelliteServe})},L=t=>{const s={...t,Password:v(t.Password),Code:v(t.Code)};return C({url:"/CoinAI/sys/remove",data:s,method:"post",SatelliteServe:s.SatelliteServe})},d=t=>(P("data-v-fc93712d"),t=t(),R(),t),$={class:"SysManage"},j={className:"SysManage__hint"},G={className:"SysManage__hint new"},z=d(()=>a("a",{href:"https://github.com/mo7static/AItrade.net",target:"_blank",class:"lineHeight"},"(GitHub)",-1)),O={class:"btn-wrapper"},F={class:"warn"},T={key:0},U={key:0,class:"SysManage__hint"},q=d(()=>a("span",{className:"lineHeight-success"},"更新并重启",-1)),J={key:1},K={key:1},Q=d(()=>a("a",{href:"https://github.com/mo7static/AItrade.net",target:"_blank",class:"lineHeight"},"GitHub",-1)),X=d(()=>a("span",{class:"lineHeight-warn"},"冷重启",-1)),Y={key:2},Z=d(()=>a("span",{class:"lineHeight-err"},"停止",-1)),ee=d(()=>a("span",{class:"lineHeight-err"},"删除",-1)),te=M({__name:"SysManage",props:{WssData:Object},setup(t){const s=t,h=s.WssData.AppEnv.Version,S=s.WssData.GithubInfo.Version;let g=!1;S&&h&&(g=S!==h);let l=N(0);const k=()=>{l.value=-1},b=()=>{l.value=1},w=n=>{let o="修改资料";n==1&&(o="重启服务"),n==-1&&(o="删除服务"),B({EmailAction:o,IsPassword:!0,async OkBack(i){const u={Password:i.Password,Code:i.Code};if(n===1)return I(u);if(n===-1)return A(u)}})},A=async n=>{(await L({...n,SatelliteServe:s.WssData.AppEnv.ServeID})).Code>0&&window.$message.warning("删除指令已发送!",{onAfterLeave(){window.location.replace("/CoinServe")}})},I=async n=>{(await W({...n,SatelliteServe:s.WssData.AppEnv.ServeID})).Code>0&&window.$message.success("重启指令已发送!请等待页面跳转",{onAfterLeave(){V.remove("SatelliteServe"),window.location.replace("/CoinServe")},duration:5e3})};return(n,o)=>{const i=x,u=D("RouterLink");return r(),c("div",$,[a("div",j,"当前版本："+y(f(h)),1),a("div",G,[e(" 最新版本："+y(f(S))+" ",1),z]),a("div",O,[_(i,{ghost:"",type:"error",onClick:k},{default:p(()=>[e(" 删除服务 ")]),_:1}),_(i,{ghost:"",type:"success",onClick:b},{default:p(()=>[e(" 更新并重启 ")]),_:1})]),a("div",F,[l.value==0?(r(),c("div",T,[f(g)?(r(),c("div",U,[e(" 建议执行 "),q,e(" 操作或查看 "),_(u,{to:"/About/ReleaseNotes",className:"lineHeight"},{default:p(()=>[e("更新日志")]),_:1})])):(r(),c("div",J,"程序将 7*24 小时监听您的账户,并根据您的设置自动执行交易。"))])):m("",!0),l.value==1?(r(),c("div",K,[e(" 将会从 "),Q,e(" 下载最新代码,并完成 "),X,e("，重启之后您的账户将会重新受到托管。 "),_(i,{size:"tiny",type:"success",onClick:o[0]||(o[0]=H=>w(1))},{default:p(()=>[e("执行升级")]),_:1})])):m("",!0),l.value==-1?(r(),c("div",Y,[e(" 这将彻底 "),Z,e(" 并 "),ee,e(" 您的服务，本地安装的文件将会被删除，包括二进制安装文件以及运行日志和填写的数据和资料,稍后可能需要重新部署 "),_(i,{size:"tiny",type:"error",onClick:o[1]||(o[1]=H=>w(-1))},{default:p(()=>[e("我就是要删掉它")]),_:1})])):m("",!0)])])}}});const re=E(te,[["__scopeId","data-v-fc93712d"]]);export{re as default};
