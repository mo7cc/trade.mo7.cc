import{b5 as ee,b6 as te,b7 as ne,Q as le,aK as R,b8 as ie,av as H,H as se,a as C,I as oe,J as re,b9 as ae,aH as ue,a0 as L,y as B,a6 as ce,ah as Y,M as f,aS as Z,aQ as E,aI as fe}from"./index-e1b4e266.js";import{c as de,a as V,f as he}from"./Follower-44967ea4.js";function ye(i,n){let{target:l}=i;for(;l;){if(l.dataset&&l.dataset[n]!==void 0)return!0;l=l.parentElement}return!1}function be(i={},n){const l=ee({ctrl:!1,command:!1,win:!1,shift:!1,tab:!1}),{keydown:u,keyup:s}=i,o=a=>{switch(a.key){case"Control":l.ctrl=!0;break;case"Meta":l.command=!0,l.win=!0;break;case"Shift":l.shift=!0;break;case"Tab":l.tab=!0;break}u!==void 0&&Object.keys(u).forEach(g=>{if(g!==a.key)return;const v=u[g];if(typeof v=="function")v(a);else{const{stop:k=!1,prevent:T=!1}=v;k&&a.stopPropagation(),T&&a.preventDefault(),v.handler(a)}})},p=a=>{switch(a.key){case"Control":l.ctrl=!1;break;case"Meta":l.command=!1,l.win=!1;break;case"Shift":l.shift=!1;break;case"Tab":l.tab=!1;break}s!==void 0&&Object.keys(s).forEach(g=>{if(g!==a.key)return;const v=s[g];if(typeof v=="function")v(a);else{const{stop:k=!1,prevent:T=!1}=v;k&&a.stopPropagation(),T&&a.preventDefault(),v.handler(a)}})},y=()=>{(n===void 0||n.value)&&(H("keydown",document,o),H("keyup",document,p)),n!==void 0&&se(n,a=>{a?(H("keydown",document,o),H("keyup",document,p)):(R("keydown",document,o),R("keyup",document,p))})};return te()?(ne(y),le(()=>{(n===void 0||n.value)&&(R("keydown",document,o),R("keyup",document,p))})):y(),ie(l)}function $(i){return i&-i}class me{constructor(n,l){this.l=n,this.min=l;const u=new Array(n+1);for(let s=0;s<n+1;++s)u[s]=0;this.ft=u}add(n,l){if(l===0)return;const{l:u,ft:s}=this;for(n+=1;n<=u;)s[n]+=l,n+=$(n)}get(n){return this.sum(n+1)-this.sum(n)}sum(n){if(n===void 0&&(n=this.l),n<=0)return 0;const{ft:l,min:u,l:s}=this;if(n>s)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let o=n*u;for(;n>0;)o+=l[n],n-=$(n);return o}getBound(n){let l=0,u=this.l;for(;u>l;){const s=Math.floor((l+u)/2),o=this.sum(s);if(o>n){u=s;continue}else if(o<n){if(l===s)return this.sum(l+1)<=n?l+1:s;l=s}else return s}return l}}let N;function ve(){return N===void 0&&("matchMedia"in window?N=window.matchMedia("(pointer:coarse)").matches:N=!1),N}let P;function U(){return P===void 0&&(P="chrome"in window?window.devicePixelRatio:1),P}const we=V(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[V("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[V("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),ke=C({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(i){const n=oe();we.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:de,ssr:n}),re(()=>{const{defaultScrollIndex:e,defaultScrollKey:t}=i;e!=null?z({index:e}):t!=null&&z({key:t})});let l=!1,u=!1;ae(()=>{if(l=!1,!u){u=!0;return}z({top:k.value,left:v})}),ue(()=>{l=!0,u||(u=!0)});const s=L(()=>{const e=new Map,{keyField:t}=i;return i.items.forEach((r,d)=>{e.set(r[t],d)}),e}),o=B(null),p=B(void 0),y=new Map,a=L(()=>{const{items:e,itemSize:t,keyField:r}=i,d=new me(e.length,t);return e.forEach((h,m)=>{const c=h[r],w=y.get(c);w!==void 0&&d.add(m,w)}),d}),g=B(0);let v=0;const k=B(0),T=ce(()=>Math.max(a.value.getBound(k.value-Y(i.paddingTop))-1,0)),X=L(()=>{const{value:e}=p;if(e===void 0)return[];const{items:t,itemSize:r}=i,d=T.value,h=Math.min(d+Math.ceil(e/r+1),t.length-1),m=[];for(let c=d;c<=h;++c)m.push(t[c]);return m}),z=(e,t)=>{if(typeof e=="number"){M(e,t,"auto");return}const{left:r,top:d,index:h,key:m,position:c,behavior:w,debounce:b=!0}=e;if(r!==void 0||d!==void 0)M(r,d,w);else if(h!==void 0)j(h,w,b);else if(m!==void 0){const W=s.value.get(m);W!==void 0&&j(W,w,b)}else c==="bottom"?M(0,Number.MAX_SAFE_INTEGER,w):c==="top"&&M(0,0,w)};let I,F=null;function j(e,t,r){const{value:d}=a,h=d.sum(e)+Y(i.paddingTop);if(!r)o.value.scrollTo({left:0,top:h,behavior:t});else{I=e,F!==null&&window.clearTimeout(F),F=window.setTimeout(()=>{I=void 0,F=null},16);const{scrollTop:m,offsetHeight:c}=o.value;if(h>m){const w=d.get(e);h+w<=m+c||o.value.scrollTo({left:0,top:h+w-c,behavior:t})}else o.value.scrollTo({left:0,top:h,behavior:t})}}function M(e,t,r){o.value.scrollTo({left:e,top:t,behavior:r})}function Q(e,t){var r,d,h;if(l||i.ignoreItemResize||K(t.target))return;const{value:m}=a,c=s.value.get(e),w=m.get(c),b=(h=(d=(r=t.borderBoxSize)===null||r===void 0?void 0:r[0])===null||d===void 0?void 0:d.blockSize)!==null&&h!==void 0?h:t.contentRect.height;if(b===w)return;b-i.itemSize===0?y.delete(e):y.set(e,b-i.itemSize);const x=b-w;if(x===0)return;m.add(c,x);const S=o.value;if(S!=null){if(I===void 0){const _=m.sum(c);S.scrollTop>_&&S.scrollBy(0,x)}else if(c<I)S.scrollBy(0,x);else if(c===I){const _=m.sum(c);b+_>S.scrollTop+S.offsetHeight&&S.scrollBy(0,x)}A()}g.value++}const D=!ve();let O=!1;function q(e){var t;(t=i.onScroll)===null||t===void 0||t.call(i,e),(!D||!O)&&A()}function G(e){var t;if((t=i.onWheel)===null||t===void 0||t.call(i,e),D){const r=o.value;if(r!=null){if(e.deltaX===0&&(r.scrollTop===0&&e.deltaY<=0||r.scrollTop+r.offsetHeight>=r.scrollHeight&&e.deltaY>=0))return;e.preventDefault(),r.scrollTop+=e.deltaY/U(),r.scrollLeft+=e.deltaX/U(),A(),O=!0,he(()=>{O=!1})}}}function J(e){if(l||K(e.target)||e.contentRect.height===p.value)return;p.value=e.contentRect.height;const{onResize:t}=i;t!==void 0&&t(e)}function A(){const{value:e}=o;e!=null&&(k.value=e.scrollTop,v=e.scrollLeft)}function K(e){let t=e;for(;t!==null;){if(t.style.display==="none")return!0;t=t.parentElement}return!1}return{listHeight:p,listStyle:{overflow:"auto"},keyToIndex:s,itemsStyle:L(()=>{const{itemResizable:e}=i,t=E(a.value.sum());return g.value,[i.itemsStyle,{boxSizing:"content-box",height:e?"":t,minHeight:e?t:"",paddingTop:E(i.paddingTop),paddingBottom:E(i.paddingBottom)}]}),visibleItemsStyle:L(()=>(g.value,{transform:`translateY(${E(a.value.sum(T.value))})`})),viewportItems:X,listElRef:o,itemsElRef:B(null),scrollTo:z,handleListResize:J,handleListScroll:q,handleListWheel:G,handleItemResize:Q}},render(){const{itemResizable:i,keyField:n,keyToIndex:l,visibleItemsTag:u}=this;return f(Z,{onResize:this.handleListResize},{default:()=>{var s,o;return f("div",fe(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[this.items.length!==0?f("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[f(u,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map(p=>{const y=p[n],a=l.get(y),g=this.$slots.default({item:p,index:a})[0];return i?f(Z,{key:y,onResize:v=>this.handleItemResize(y,v)},{default:()=>g}):(g.key=y,g)})})]):(o=(s=this.$slots).empty)===null||o===void 0?void 0:o.call(s)])}})}}),Se=C({name:"Backward",render(){return f("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f("path",{d:"M12.2674 15.793C11.9675 16.0787 11.4927 16.0672 11.2071 15.7673L6.20572 10.5168C5.9298 10.2271 5.9298 9.7719 6.20572 9.48223L11.2071 4.23177C11.4927 3.93184 11.9675 3.92031 12.2674 4.206C12.5673 4.49169 12.5789 4.96642 12.2932 5.26634L7.78458 9.99952L12.2932 14.7327C12.5789 15.0326 12.5673 15.5074 12.2674 15.793Z",fill:"currentColor"}))}}),Te=C({name:"FastBackward",render(){return f("svg",{viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},f("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},f("g",{fill:"currentColor","fill-rule":"nonzero"},f("path",{d:"M8.73171,16.7949 C9.03264,17.0795 9.50733,17.0663 9.79196,16.7654 C10.0766,16.4644 10.0634,15.9897 9.76243,15.7051 L4.52339,10.75 L17.2471,10.75 C17.6613,10.75 17.9971,10.4142 17.9971,10 C17.9971,9.58579 17.6613,9.25 17.2471,9.25 L4.52112,9.25 L9.76243,4.29275 C10.0634,4.00812 10.0766,3.53343 9.79196,3.2325 C9.50733,2.93156 9.03264,2.91834 8.73171,3.20297 L2.31449,9.27241 C2.14819,9.4297 2.04819,9.62981 2.01448,9.8386 C2.00308,9.89058 1.99707,9.94459 1.99707,10 C1.99707,10.0576 2.00356,10.1137 2.01585,10.1675 C2.05084,10.3733 2.15039,10.5702 2.31449,10.7254 L8.73171,16.7949 Z"}))))}}),Ce=C({name:"FastForward",render(){return f("svg",{viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},f("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},f("g",{fill:"currentColor","fill-rule":"nonzero"},f("path",{d:"M11.2654,3.20511 C10.9644,2.92049 10.4897,2.93371 10.2051,3.23464 C9.92049,3.53558 9.93371,4.01027 10.2346,4.29489 L15.4737,9.25 L2.75,9.25 C2.33579,9.25 2,9.58579 2,10.0000012 C2,10.4142 2.33579,10.75 2.75,10.75 L15.476,10.75 L10.2346,15.7073 C9.93371,15.9919 9.92049,16.4666 10.2051,16.7675 C10.4897,17.0684 10.9644,17.0817 11.2654,16.797 L17.6826,10.7276 C17.8489,10.5703 17.9489,10.3702 17.9826,10.1614 C17.994,10.1094 18,10.0554 18,10.0000012 C18,9.94241 17.9935,9.88633 17.9812,9.83246 C17.9462,9.62667 17.8467,9.42976 17.6826,9.27455 L11.2654,3.20511 Z"}))))}}),Ie=C({name:"Forward",render(){return f("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f("path",{d:"M7.73271 4.20694C8.03263 3.92125 8.50737 3.93279 8.79306 4.23271L13.7944 9.48318C14.0703 9.77285 14.0703 10.2281 13.7944 10.5178L8.79306 15.7682C8.50737 16.0681 8.03263 16.0797 7.73271 15.794C7.43279 15.5083 7.42125 15.0336 7.70694 14.7336L12.2155 10.0005L7.70694 5.26729C7.42125 4.96737 7.43279 4.49264 7.73271 4.20694Z",fill:"currentColor"}))}}),xe=C({props:{onFocus:Function,onBlur:Function},setup(i){return()=>f("div",{style:"width: 0; height: 0",tabindex:0,onFocus:i.onFocus,onBlur:i.onBlur})}});export{Se as B,xe as F,ke as V,Ie as a,Ce as b,Te as c,ye as h,be as u};
